<head>
	<title>Outer Rim Postal Service</title>
</head>

<body>
	{{> header }}

	{{> lobby }}

	{{> staging }}

	{{> orps }}

	{{> footer }}

	{{> debug }}
</body>


<template name="header">
	<div id="header" class="row-fluid page-header">
		<div class="span8">
			<h1>Outer Rim Postal Service <small>ORPS</small></h1>
		</div>
		<div class="span4">
			<div style="float: right; margin-right: 10px;">
				{{loginButtons align="right"}}
			</div>
		</div>
	</div>
</template>


<template name="lobby">
	{{#if show }}
		<div class="row-fluid">
			<ul class="games unstyled text-center">
				{{#each games }}
					{{> game}}
				{{/each }}
			</ul>
		</div>
	{{/if}}
</template>

<template name="game">
	<li class="game span4">
		<div class="thumbnail">
			<div class="caption">
				<h2 class="game-name">{{name}}</h2>
				<p class="game-description">{{description}}</p>
				<p class="game-player-count">Players: <span class="badge badge-info">{{player_count}}</span></p>
				{{#if currentUser }}
					<input type="button" class="btn btn-primary btn-large game-join" value="Join" />
				{{/if}}
			</div>
		</div>
	</li>
</template>


<template name="staging">
	{{#if show }}
	<div class="row-fluid">
		<h3 class="game-name">{{game_name}} <small>{{game_description}}</small></h3>
	</div>
	<div class="row-fluid">
		<div class="span5 staging-animation-limbo">
			<svg width="100%" height="200px" style="background: #ccc;">
				<circle style="stroke-width:5px;fill:none;stroke:red;stroke-dasharray: 9, 5;stroke-opacity: .8;" cx="100" cy="100" r="50"></circle>
			</svg>
		</div>
		<div class="span2 staging-completed-games">
		</div>
		<div class="span5 staging-chat">
			<div class="row-fluid">
				<div class="span12">
					{{#each chats }}
						{{> chat}}
					{{/each}}
				</div>
			</div>
			<div class="row-fluid">
				<div class="span12 input-append">
					<input type="text" class="staging-chat-input span9" value="" placeholder="Type your message here and hit enter to send" />
					<input type="button" class="staging-chat-send btn btn-primary" value="Send" />
				</div>
			</div>
		</div>
	</div>
	<input type="button" class="btn btn-primary btn-large game-leave" value="Return to Lobby" />
	<input type="button" class="btn {{btn_primary_or_success}} btn-large game-start" value="Ready Up!" />
	{{/if}}
</template>

<template name="chat">
	<div class="well well-small" style="margin-bottom: 2px;">
		<div class="timestamp pull-right"><small>{{timestamp_formatted}}</small></div>
		<strong>{{name}}</strong>: {{message}}
	</div>
</template>


<template name="orps">
	{{#if show }}
		{{#if status_loading }}
			{{> loading }}
		{{/if}}
		{{#if status_writing }}
			{{> writing }}
		{{/if}}
		{{#if status_answering }}
			{{> answering }}
		{{/if}}
		{{#if status_results }}
			{{> results }}
		{{/if}}
	{{/if}}
</template>

<template name="loading">
	loading.
	{{> animations }}
	{{> captions }}
	{{> inputs }}
</template>

<template name="writing">
	writing.
	{{> animations }}
	{{> captions }}
	{{> inputs }}
</template>

<template name="answering">
	answering.
	{{> animations }}
	{{> captions }}
	{{> inputs }}
</template>

<template name="results">
	results.
	{{> animations }}
	{{> captions }}
	{{> inputs }}
</template>


<template name="animations">
</template>

<template name="captions">
</template>

<template name="inputs">
</template>


<template name="footer">
	<div id="footer" class="row-fluid">
		<div class="span12">
			<small>The Outer Rim Postal Service is a game created by <a href="http://www.linkedin.com/in/paulrryan/">Paul Ryan</a> and Justin Hedani as part of the <a href="https://dcdc.coe.hawaii.edu">DCDC</a> Project Jam, January 2014.</small>
		</div>
	</div>
</template>

<template name="debug">
	<div id="debug" class="row-fluid">
		<p>Logged in users:</p>
		<ul>
			{{#each debug_logged_in_users }}
				<li>{{profile.name}} ({{services.google.email}}{{emails.0.address}}) ({{_id}})</li>
			{{/each}}
		</ul>
		<p>Players in games:</p>
		<ul>
			{{#each players }}
				<li>{{name}}, Game: {{game_id}} ({{_id}})</li>
			{{/each}}
		</ul>
		<p>Active rounds:</p>
		<ul>
			{{#each rounds }}
				<li><a class="close debug-round-delete" href="#">&times;</a> {{_id}}, Status: {{status}}. Users: {{#each round_players}} {{.}}, {{/each}}</li>
			{{/each}}
		</ul>
	</div>
</template>
